name: Present VCS API

on:
   push:
     branches:
       - vcs-api

jobs:
   build:
     runs-on: ubuntu-latest
     steps:

      - name: Login via Azure CLI
        uses: azure/login@v1
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}
          
      - name: Azure Container Registry Build
        uses: Azure/acr-build@v1
        with:
          login-server: acrgovtech24.azurecr.io
          # Admin user credentials for the ACR
          username: acrgovtech24
          password: ${{ secrets.ACR_PASSWORD }}
          # The name of the ACR, minus the .azurecr.io
          registry: acrgovtech24
          # Repository to use
          repository: /present-vcs-api
          # The folder in the Github repo that holds the source
          folder: /present-vcs-api
